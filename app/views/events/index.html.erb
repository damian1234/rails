<p id="notice"><%= notice %></p>

<h1>Events</h1>

<br>
<%= month_calendar events: @events do |date, events| %>
  <div class="calendar-date-num"><%= date.day %></div>
  
  <% events.each do |event| %>
    <div>
      <h6><%= event.start_time.to_s(:time) %> - <b><%= event.name %></b></h6>
    </div>
  <% end %>
<% end %>

<!--
list = [0,1,2,3,...n] list of indices
for(int i, etc){
  for(int j etc){
    if(events[list[i]] > events[list[j]){
     swap the elements
      temp = events[list[i]
      events[list[i]] = events[list[j]]
      events[list[j]] = temp
    }
  }
}
-->

<% @events.sort_by(&:start_time) %>

<!--
<br>
<p>test: print events iteratively</p>
<br>
<% i = 0 %>
<% until i == @events.size  %>
  <%= @events[i].name %>
  <br>
  <p> should have printed </p>
  <br>
  <% i = i + 1 %>
<% end %>
<p>end print</p>
-->

<% if current_user.try(:admin?) %>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Start time</th>
        <th colspan="3"></th>
      </tr>
    </thead>
  
    <tbody>
      <% @events.each do |event, events, date| %>
        <tr>
          <td><%= event.name %></td>
          <td><%= event.start_time %></td>
          <td><%= link_to 'Show', event %></td>
          <% if current_user.admin %>
            <td><%= link_to 'Edit', edit_event_path(event) %></td>
            <td><%= link_to 'Destroy', event, method: :delete, data: { confirm: 'Are you sure?' } %></td>
          <% end%>
        </tr>
      <% end %>
    </tbody>
  </table>
  
  <%= link_to 'New Event', new_event_path, class: "btn btn-default" %>

<% end %>